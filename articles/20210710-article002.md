---
title: "React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆBasic: useStateï¼‰"
emoji: "ğŸ¤–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "react hooks"]
published: false
---

# React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆBasic: useStateï¼‰
## useStateã®åŸºæœ¬

- `useState` ã¨ã¯ã€stateï¼ˆçŠ¶æ…‹ï¼‰ã®valueã¨ã€stateã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’è¿”ã™hooksã§ã‚ã‚‹ã€‚

### é€šå¸¸ã®React

```javascript
class TemperatureInput extends React.Component {
  constructor(props) {
    super(props);
    this.handleChange = this.handleChange.bind(this);
    this.state = {temperature: ''};
  }

  handleChange(e) {
    this.setState({temperature: e.target.value});
  }

  render() {
    const temperature = this.state.temperature;
    const scale = this.props.scale;
    return (
      <fieldset>
        <legend>Enter temperature:</legend>
        <input value={temperature}
               onChange={this.handleChange} />
      </fieldset>
    );
  }
}
```

ä¸Šè¨˜ã®calculatorã‚¯ãƒ©ã‚¹ã®å ´åˆã€åˆå›ã§ `temperature` ã®å€¤ã¯ç©ºç™½ã¨ãªã£ã¦ãŠã‚Šã€ãã®çŠ¶æ…‹ã‚’è¨­å®šã—ã¦ã„ã‚‹ã€‚ã“ã®å€¤ã‚’æ›´æ–°ã™ã‚‹å ´åˆã¯ã€inputã® `onChange` ã«ã¦`handleChange` é–¢æ•°ã‚’ç«‹ã¡ä¸Šã’ã¦ã€`setState` é–¢æ•°ã«ã‚ˆã£ã¦ã€`temperature` ã®å€¤ã‚’ã‚’æ›´æ–°ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã‚’ã€`useState` ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

### React Hooksã‚’ç”¨ã„ãŸCalculatorã‚¯ãƒ©ã‚¹

- React Hooksã¨TypeScriptã‚’ç”¨ã„ã¦componentã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚

```javascript
const TemperatureInput = () => {
  const [temperature, setTemperature] = useState<number>(); // â€»1
  return (
    <fieldset>
      <legend>Enter temperature:</legend>
      <input
        value={temperature}
        onChange={(value: number) => setTemperature(value)}
      />
    </fieldset>
  )
}
```

- `useState` ã§çŠ¶æ…‹ç®¡ç†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€`constructor` ã¨ `handleChange` (update)ã®éƒ¨åˆ†ã‚’ä¸€æ°—ã«ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ã‚³ãƒ¼ãƒ‰é‡ã‚‚æ¸›ã‚‹ã®ã§ã€ã‚ˆã‚Šã‚ã‹ã‚Šã‚„ã™ããªã£ãŸã€‚
- (â€»1) useStateã‚’å®šç¾©ã—ã¦ã‚ã’ã‚‹ã¨ãã«ã¯ã€setStateéƒ¨åˆ†ã¯ã€stateã« `set` ã‚’ä»˜ã‘åŠ ãˆã¦ã‚ã’ã‚Œã°ã€åŸºæœ¬çš„ã«ã¯å¤§ä¸ˆå¤«ã‹ã¨æ€ã„ã¾ã™ã€‚

## state ã®é…å»¶åˆæœŸåŒ–

- ã‚‚ã—ã€åˆæœŸã®stateãŒã€å˜ç´”ãªå€¤ã‚’è¨­å®šã‚’ã—ãªã„ã®ã§ã‚ã‚Œã°ã€é–¢æ•°ã‚’æ¸¡ã™ã“ã¨ã‚‚å¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã€‚åˆå›ã®renderæ™‚ã«ã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹ã€‚

```javascript
const TemperatureInput = () => {
  const [temperature, setTemperature] = useState<number>((value: number) => {
    if (value <= 5 && value >= -5) {
      return 0;
    } else {
      return value;
    }
  });
  return (
    <fieldset>
      <legend>Enter temperature:</legend>
      <input
        value={temperature}
        onChange={(value: nuber) => setTemperature(value)}
      />
    </fieldset>
  )
}
```

## state æ›´æ–°ã®å›é¿

- stateæ›´æ–°æ™‚ã«ã€ç¾åœ¨ã®å€¤ã¨åŒã˜ã ã£ãŸå ´åˆã¯ã€æ›´æ–°ãŒå›é¿ã•ã‚Œã¦å‡¦ç†ãŒçµ‚äº†ã•ã‚Œã‚‹ã€‚
- ã‚‚ã—renderä¸­ã«é«˜åº¦ãªè¨ˆç®—ã‚’ã—ã¦ã„ã‚‹å ´åˆã¯ã€ã€€`useMemo` ã‚’ä½¿ç”¨ã™ã‚‹ã¨è‰¯ã„ã€‚

## reference

- [ãƒ•ãƒƒã‚¯ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://ja.reactjs.org/docs/hooks-reference.html)
- [ã™ã”ã„Reactãƒ•ãƒƒã‚¯8é¸](https://qiita.com/baby-degu/items/52dbb382bbaf6c43e2db)
