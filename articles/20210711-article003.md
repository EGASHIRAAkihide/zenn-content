---
title: "React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆBasic: useEffectï¼‰"
emoji: "ğŸ˜€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "react hooks"]
published: true
---

# React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆBasic: useEffectï¼‰
## useEffectã®åŸºæœ¬

- ã€ŒDOMã®æ›¸ãæ›ãˆï¼ˆmutationï¼‰ã€ã€Œãƒ‡ãƒ¼ã‚¿è³¼èª­ï¼ˆsubscriptionsï¼‰ã€ã€Œtimerã€ã€Œloggingã€ãªã©ã®å‰¯ä½œç”¨ï¼ˆside effectsï¼‰ ã«ãŠã„ã¦ã¯ã€UIã«ã¾ã¤ã‚ã‚‹ãƒã‚°ã‚„éæ•´åˆæ€§ã‚’å¼•ãèµ·ã“ã™åŸå› ã¨ãªã‚‹ã€‚ãã®ãŸã‚ã€é–¢æ•°componentæœ¬ä½“ï¼ˆReact Render Phaseï¼‰ã§æå†™ã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚ãã®ã‚ˆã†ãªå ´åˆã«ä½¿ç”¨ã™ã‚‹ã®ãŒ`useEffect`ã«ãªã‚‹ã€‚
- `useEffect`ã«æ¸¡ã•ã‚ŒãŸé–¢æ•°ã¯ã€renderãŒç”»é¢ã«æå†™ã•ã‚ŒãŸå¾Œã«å‹•ä½œã™ã‚‹ã€‚
- `componentDidMount`ã¨`componentDidUpdate`ã®2ã¤ã®æ©Ÿèƒ½ã‚’æŒã£ãŸhookã§ã‚ã‚‹ã€‚

### effectã®åˆæœŸåŒ–ï¼ˆcleanupï¼‰

```javascript
useEffect(() => {
  const subscription = props.source.subscribe();
  return () => {
    subscription.unsubscribe();
  };
});
```

- ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€æ›´æ–°ãŒã•ã‚Œã‚‹ãŸã³ã«æ–°ã—ã„subscriptionãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚
- å‰å›ã®effectã¯ã€æ¬¡å›ã®effectãŒå®Ÿè¡Œã•ã‚Œã‚‹å‰ã«cleanupã•ã‚Œã‚‹ã€‚

### æ¡ä»¶ä»˜ãã§`useEffect`ã‚’å®Ÿè¡Œ

```javascript
useEffect(
  () => {
    const subscription = props.source.subscribe();
    return () => {
      subscription.unsubscribe();
    };
  },
  [props.source],
);
```

- ä¸Šè¨˜ã®ä¾‹ã ã¨ã€`useEffect`ã®ç¬¬2å¼•æ•°ã¨ã—ã¦ã€`[props.source]`ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã€‚ã“ã†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€`props.source`ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã®ã¿`useEffect`ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
- ç©ºé…åˆ—ï¼ˆ`[]`ï¼‰ã®å ´åˆã€mountæ™‚ã«effectãŒå®Ÿè¡Œã•ã‚Œã€unmountæ™‚ã«cleanupã•ã‚Œã‚‹ãŒã€æ›´æ–°æ™‚ã«ã¯å®Ÿè¡Œã•ã‚Œãªã„ã“ã¨ã«ãªã‚‹ã€‚

## reference

- [ãƒ•ãƒƒã‚¯ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://ja.reactjs.org/docs/hooks-reference.html)
- [ã™ã”ã„Reactãƒ•ãƒƒã‚¯8é¸](https://qiita.com/baby-degu/items/52dbb382bbaf6c43e2db)
