---
title: "React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆAdditional: useReducerï¼‰"
emoji: "ğŸ˜†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "react hooks"]
published: true
---

# React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆBasic: useReducerï¼‰
## `useReducer`ã¨ã¯

- `useReducer`ã¯ã€`useState`ã®ä»£æ›¿å“ã€‚
- è¤‡æ•°ã®å€¤ã«ã¾ãŸãŒã‚‹è¤‡é›‘ãªstateãƒ­ã‚¸ãƒƒã‚¯ãŒã‚ã‚‹å ´åˆã‚„ã€å‰ã®stateã«åŸºã¥ã„ã¦æ¬¡ã®stateã‚’æ±ºã‚ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã«ä½¿ç”¨ã€‚
- `(state, action) => newState()`ã¨ã„ã†reducerã‚’å—ã‘å–ã‚Šã€ç¾åœ¨ã®stateã‚’`dispatch`ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒšã‚¢ã«ã—ã¦è¿”ã™ã€‚
- callbackã®ä»£ã‚ã‚Šã«`dispatch`ã‚’ä¸‹ä½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–ã«ã‚‚ãªã‚‹ã€‚

```javascript
const [state, dispatch] = useReducer(reducer, initialArg, init);
```

## `useState`ã¨`useReducer`ã¨ã®æ¯”è¼ƒï¼ˆå…¬å¼ã‚ˆã‚Šï¼‰

### `useState`ã®å ´åˆ

```javascript
function Counter({initialCount}) {
  const [count, setCount] = useState(initialCount);
  return (
    <>
      Count: {count}
      <button onClick={() => setCount(initialCount)}>Reset</button>
      <button onClick={() => setCount(prevCount => prevCount - 1)}>-</button>
      <button onClick={() => setCount(prevCount => prevCount + 1)}>+</button>
    </>
  );
}
```

### `useReducer`ã®å ´åˆ

```javascript
function init(initialCount) {
  return {count: initialCount};
}

function reducer(state, action) {
  switch (action.type) {
    case 'increment':
      return {count: state.count + 1};
    case 'decrement':
      return {count: state.count - 1};
    case 'reset':
      return init(action.payload);
    default:
      throw new Error();
  }
}

function Counter({initialCount}) {
  const [state, dispatch] = useReducer(reducer, initialCount, init);
  return (
    <>
      Count: {state.count}
      <button
        onClick={() => dispatch({type: 'reset', payload: initialCount})}>
        Reset
      </button>
      <button onClick={() => dispatch({type: 'decrement'})}>-</button>
      <button onClick={() => dispatch({type: 'increment'})}>+</button>
    </>
  );
}
```

## `useReducer`ã®åˆæœŸåŒ–æ–¹æ³•

### åˆæœŸstateã‚’æŒ‡å®š

```javascript
const [state, dispatch] = useReducer(
    reducer,
    {count: initialCount}
  );
```

### é…å»¶åˆæœŸåŒ–

- `init`é–¢æ•°ã‚’ç¬¬3å¼•æ•°ã¨ã—ã¦æ¸¡ã™ï¼ˆä¸Šè¨˜ã®ã€Œ`useReducer`ã®å ´åˆã€ãŒãã‚Œã«å½“ãŸã‚‹ï¼‰

## dispatchã«ã‚ˆã‚‹æ›´æ–°ã®å›é¿

- ç¾åœ¨å€¤ã®stateã¨åŒã˜å€¤ã‚’è¿”ã—ãŸå ´åˆã¯ã€dispatchã«ã‚ˆã£ã¦å®Ÿè¡Œã‚’å›é¿ã—ã¦å‡¦ç†ã‚’çµ‚äº†ã™ã‚‹ã€‚

## reference

- [ãƒ•ãƒƒã‚¯ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://ja.reactjs.org/docs/hooks-reference.html)
- [ã™ã”ã„Reactãƒ•ãƒƒã‚¯8é¸](https://qiita.com/baby-degu/items/52dbb382bbaf6c43e2db)
- [React - context](https://ja.reactjs.org/docs/context.html)
