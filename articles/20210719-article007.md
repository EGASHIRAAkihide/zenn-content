---
title: "React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆAdditional: useRefï¼‰"
emoji: "ğŸ˜‚"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "react hooks"]
published: true
---

# React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆAdditional: useRefï¼‰
## Reactã¨Refã¨ã®é–¢ä¿‚æ€§ï¼ˆãŠã•ã‚‰ã„ã€å…¬å¼ã‚ˆã‚ŠæŠœç²‹ï¼‰

### refã¨ã¯

- Refã¯ã€renderãƒ¡ã‚½ãƒƒãƒ‰ã§ä½œæˆã•ã‚ŒãŸDOMãƒãƒ¼ãƒ‰ã¾ãŸã¯Reactè¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã€‚

### refã®ä½¿ç”¨çŠ¶æ³

- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã€ãƒ†ã‚­ã‚¹ãƒˆã®é¸æŠåŠã³ãƒ¡ãƒ‡ã‚£ã‚¢å†ç”Ÿã®ç®¡ç†
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ç™ºç«
- ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®DOMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã®çµ±åˆ

### refã®ä½œæˆ

```javascript
class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.myRef = React.createRef();
  }
  render() {
    return <div ref={this.myRef} />;
  }
}
```

- `React.createRef()`ã‚’ä½¿ç”¨ã—ã¦ä½œæˆã•ã‚Œã€refå±æ€§ã‚’ç”¨ã„ã¦Reactè¦ç´ ã«ç´ä»˜ã‘ã‚‰ã‚Œã‚‹ã€‚

### refã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

```javascript
const node = this.myRef.current;
```

- HTMLè¦ç´ ã«å¯¾ã—ã¦`ref`å±æ€§ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã€`React.createRef()`ã‚’ç”¨ã„ã¦constructorå†…ã§ä½œæˆã•ã‚ŒãŸrefã¯ã€ãã®`current`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦æ ¹åº•ã«ã‚ã‚‹DOMè¦ç´ ã‚’å—ã‘å–ã‚‹ã€‚
- `ref`å±æ€§ãŒcustom class-componentã§ä½¿ç”¨ã•ã‚Œã‚‹ã¨ãã€`ref`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯componentã®mountã•ã‚ŒãŸinstanceã‚’currentã¨ã—ã¦å—ã‘å–ã‚‹ã€‚
- `ref`ã®æ›´æ–°ã¯``componentDidMount`ã¾ãŸã¯`componentDidUpdate`ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã®å‰ã«è¡Œã‚ã‚Œã‚‹ã€‚

### DOMè¦ç´ ã¸ã®Refè¿½åŠ 

```javascript
class CustomTextInput extends React.Component {
  constructor(props) {
    super(props);
    this.textInput = React.createRef();
    this.focusTextInput = this.focusTextInput.bind(this);
  }

  focusTextInput() {
    this.textInput.current.focus();
  }

  render() {
    return (
      <div>
        <input
          type="text"
          ref={this.textInput} />
        <input
          type="button"
          value="Focus the text input"
          onClick={this.focusTextInput}
        />
      </div>
    );
  }
}
```

### é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- defaultã§ã¯ã€é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«refå±æ€§ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ããªã„ï¼ˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒãªã„ãŸã‚ï¼‰ã€‚ãŸã ã—ã€DOMè¦ç´ ã¾ãŸã¯ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ã„ã‚‹é™ã‚Šã€é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§refå±æ€§ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚

```javascript
function CustomTextInput(props) {
  // ref ãŒå‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã€textInput ã‚’ã“ã“ã§å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  const textInput = useRef(null);
  
  function handleClick() {
    textInput.current.focus();
  }

  return (
    <div>
      <input
        type="text"
        ref={textInput} />
      <input
        type="button"
        value="Focus the text input"
        onClick={handleClick}
      />
    </div>
  );
}
```

## reference

- [ãƒ•ãƒƒã‚¯ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://ja.reactjs.org/docs/hooks-reference.html)
- [ã™ã”ã„Reactãƒ•ãƒƒã‚¯8é¸](https://qiita.com/baby-degu/items/52dbb382bbaf6c43e2db)
- [Memoization](https://en.wikipedia.org/wiki/Memoization)
- [Introduction to memoization in JavaScript](https://medium.com/dailyjs/introduction-to-memoization-in-javascript-6125fa05a558)
