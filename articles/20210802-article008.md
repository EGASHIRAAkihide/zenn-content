---
title: "React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆAdditional: useImperativeHandleï¼‰"
emoji: "ğŸ¤£"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "react hooks"]
published: true
---

# React Hooksã®10ç¨®é¡ã‚’ç†è§£ã™ã‚‹ï¼ˆAdditional: useImperativeHandleï¼‰
## å‰æçŸ¥è­˜(Tips)
### ä¸‹å±¤ã®DOM componentã«refã‚’ã€Œè»¢é€ã€ã™ã‚‹

```javascript
function SampleButton(props) {
  return (
    <button className="SampleButton">
      {props.children}
    </button>
  );
}
```

é€šå¸¸ã§ã‚ã‚Œã°ã€buttonã®é–¢æ•°componentã¯ãŠãŠã‚ˆãã“ã®ã‚ˆã†ãªæ„Ÿã˜ã¨ãªã‚‹ã€‚
ã“ã®`SampleButton`ã‚’ä½¿ç”¨ã™ã‚‹ä»–ã®componentã¯ã€å†…å´ã®`button`DOMè¦ç´ ã«å¯¾ã™ã‚‹refã‚’å–å¾—ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚
ã—ã‹ã—ã€ã¨ãã«ã“ã®ã‚ˆã†ãªæœ«æ¢¢ã®componentã¯ã€é€šå¸¸ã®DOM(`input`ã‚„`button`ãªã©)ã¨åŒæ§˜ã®ã®é »åº¦ã§ä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã€
focusã‚„select, animationãªã©ã«ãŠã„ã¦DOMãƒãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã›ã–ã‚‹ã‚’ãˆãªã„çŠ¶æ…‹ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
`React.forwardRef`ã¯ã€æ¸¡ã•ã‚ŒãŸrefã‚’å—ã‘å–ã£ã¦ã€ãã‚Œã‚’ã•ã‚‰ã«ä¸‹å±¤ã®componentã«æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

```javascript
const SampleButton = React.forwardRef((props, ref) => (
  <button ref={ref} className="SampleButton">
    {props.children}
  </button>
));

const ref = React.createRef();
<SampleButton ref={ref}>Click me!</SampleButton>;
```

## useImperativeHandle

`useImperativeHandle`ã¯ã€refãŒä½¿ç”¨ã•ã‚ŒãŸéš›ã®è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã•ã‚Œã‚‹instanceå€¤ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹hooksã§ã‚ã‚‹ã€‚`forwardRef`ã¨ã¨ã‚‚ã«ç”¨ã„ã‚‹ã€‚

```javascript
function FancyInput(props, ref) {
  const inputRef = useRef();

  useImperativeHandle(ref, () => ({
    focus: () => {
      inputRef.current.focus();
    }
  }));
  
  return <input ref={inputRef} ... />;
}
FancyInput = forwardRef(FancyInput);
```

## reference

- [ãƒ•ãƒƒã‚¯ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://ja.reactjs.org/docs/hooks-reference.html)
- [ã™ã”ã„Reactãƒ•ãƒƒã‚¯8é¸](https://qiita.com/baby-degu/items/52dbb382bbaf6c43e2db)
- [forwarding refs to DOM components](https://ja.reactjs.org/docs/forwarding-refs.html#forwarding-refs-to-dom-components)
