---
title: "React: å¤šé‡ã‚¯ãƒªãƒƒã‚¯é˜²æ­¢ã«é–¢ã™ã‚‹å®Ÿè£…"
emoji: "ğŸ˜—"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "typescript", "å¤šé‡ã‚¯ãƒªãƒƒã‚¯"]
published: true
---

# React: å¤šé‡ã‚¯ãƒªãƒƒã‚¯é˜²æ­¢ã«é–¢ã™ã‚‹å®Ÿè£…

## å¤šé‡ã‚¯ãƒªãƒƒã‚¯ã¨ã¯

formã®buttonã«ãŠã„ã¦ã€é€šå¸¸ã®å®Ÿè£…ã§è¨˜è¼‰ã™ã‚‹ã¨ã€å‡¦ç†æ™‚é–“å†…ã«buttonãŒè¬³æ­Œã•ã‚ŒãŸå›æ•°ã ã‘ã€å‡¦ç†ãŒèµ°ã£ã¦ã—ã¾ã†ã€‚
ä¾‹ãˆã°ã€Amazonãªã©ã®ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚µã‚¤ãƒˆãªã©ã§ã€ã€Œè³¼å…¥ã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ã™ã‚‹ã€‚
ãã“ã§ã€Œå¤šé‡ã‚¯ãƒªãƒƒã‚¯é˜²æ­¢ã€å‡¦ç†ãŒé©åˆ‡ã«å®Ÿè£…ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€2é‡ã«ã‚¯ãƒªãƒƒã‚¯ã—ãŸéš›ã«ã€2å›å‡¦ç†ãŒèµ°ã£ã¦ã—ã¾ã†ã€‚
ãã†ãªã‚‹ã¨ã€2å›è³¼å…¥ã—ãŸã“ã¨ã«ãªã£ã¦ã—ã¾ã„ã€ä½™è¨ˆã«ä»£é‡‘ã‚’æ”¯æ‰•ã†ãƒªã‚¹ã‚¯ã‚‚å‡ºã¦ãã‚‹ã€‚
ä»Šå›ã®ã€Œå¤šé‡ã‚¯ãƒªãƒƒã‚¯é˜²æ­¢ã«é–¢ã™ã‚‹å®Ÿè£…ã€ã§ã¯ã€ãã†ã„ã£ãŸã“ã¨ã‚’é˜²ããŸã‚ã®å®Ÿè£…ã§ã‚ã‚‹ã€‚

## å¤šé‡ã‚¯ãƒªãƒƒã‚¯é˜²æ­¢ã®ãƒã‚¤ãƒ³ãƒˆ

å‡¦ç†ä¸­ãƒ•ãƒ©ã‚°ã®åˆ¤å®šã‚’ `useRef` ã«ã—ã€å€¤ã‚’å¤‰æ›´ã—ã¦ã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ç™ºç”Ÿã•ã›ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚

```javascript
const SubmitForm = () => {
  const processing = useRef(false)

  const handleSubmit = (e) => {
    e.preventDefault()
    e.stopPropagation()

    processing.current && return

    processing.current = true

    setTimeout(() => {
      process.current = false
    }, 3000)
  }

  return (
    <form onSubmit={handleSubmit}>
      <button type="submit">Submit</button>
    </form>
  )
}
```

- processing: å‡¦ç†ä¸­ã®ãƒ•ãƒ©ã‚°ã€‚
- `e.preventDefault`: submitã—ãŸéš›ã®æœ¬æ¥ã®ã‚¤ãƒ™ãƒ³ãƒˆã§ã‚ã‚‹ã€Œãƒšãƒ¼ã‚¸ã®ãƒªãƒ­ãƒ¼ãƒ‰ã€ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€‚
- `e.stopPropagation`: ã‚¤ãƒ™ãƒ³ãƒˆã®ä¼æ’­ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€‚
- processingã®ç¾åœ¨ã®çŠ¶æ…‹ï¼ˆ`processing.current`ï¼‰ãŒtrueï¼ˆå‡¦ç†ä¸­ï¼‰ã®å ´åˆã¯ã€éåŒæœŸå‡¦ç†ã›ãšã«æŠœã‘ã‚‹
- `setTimeout` ã§ã€3000msã¯å‡¦ç†çŠ¶æ…‹ã‚’falseã—ã¦éåŒæœŸå‡¦ç†ã€‚


## reference

- [Reactã‚¢ãƒ—ãƒªã®å¤šé‡ã‚¯ãƒªãƒƒã‚¯ã‚’é˜²æ­¢ã™ã‚‹æœ€é©è§£ã¨ã¯ï¼Ÿ](https://www.aizulab.com/blog/react-multiple-click-prevention/)
- [Reactã‚’ä½¿ç”¨ã—ãŸãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®é˜²æ­¢ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã„æ–¹æ³•](https://ichi.pro/react-o-shiyoshita-daburu-kurikku-de-no-kurikku-ibento-no-boshi-pafuxo-mansu-no-takai-hoho-22087590983733)
- [ã€Reactã€‘ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã«ã‚ˆã‚‹å‡¦ç†ã®é‡è¤‡ã‚’é˜²ãæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹HOC](https://qiita.com/koedamon/items/26536a97d8794cb85a86)
- [1åˆ†ã§ã‚ã‹ã‚‹return false; preventDefault(); stopPropagation() ã®é•ã„](https://iwb.jp/return-false-preventdefault-stoppropagation/)


